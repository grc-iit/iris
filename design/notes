1) use const everywhere
2) fix constants.h with constants
3) error checking everywhere
